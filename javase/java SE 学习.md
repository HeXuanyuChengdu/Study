# java SE 学习

## 前言.软件开发基本知识

### 软件

#### 软件的基本知识

软件的定义：一系列指令和数据的集合，用于控制计算机执行特定的任务。

软件的构件：

- 程序
- 数据
- 文档

软件的存储：

- 存储设备

软件的运行：

- 加载到内存，由CPU执行

####  软件的现代构成

1. 程序代码

	- 源代码：高级编程语言编成的代码

	- 编译/解释：机器码或字节码

2. 数据

	- 输入数据

	- 输出数据
	- 配置文件

3. 库和框架

	- 库：提供特定功能的代码集合

	- 框架：提供开发基础结构和工具

4. 运行时环境

	- 解释器/虚拟机

	- 依赖管理

5. 用户界面

	- 命令行界面——CLI

	- 图形界面——GUI

6. 数据库

7. 网络通信

	- API：用于不同软件模块或系统之间的通信

	- 协议：如HTTP、WebSocket等

8. 文档

	- 用户文档

	- 开发者文档

9. 测试和调试工具

17. 部署和运维工具

#### 软件的典型架构

- 单体架构

​	所用功能模块集中在一个应用程序中，适合于小型项目

- 分层架构

	一般包含三个层：

	- 表现层：用户界面
	- 业务逻辑层：核心功能
	- 数据访问层：与数据库交互

- 微服务架构

​	将应用程序拆分为多个独立服务，每个服务负责特定功能，适合大型复杂系统

- 事件驱动架构

​	基于事件触发，适合实时数据处理和异步任务

- 云原生架构

	基于云计算平台，一般包含：

	- 容器

	- 微服务

	- DevOps工具

#### 两个典型的例子

##### 一个本地游戏

包含：

- 游戏程序文件
	- 可执行文件（exe等）
	- 动态链接库
- 游戏资源文件
	- 图形
	- 音频
	- 视频
	- 配置文件
- 游戏引擎和运行时环境
	- 游戏引擎
		- 游戏的核心框架，负责渲染、物理模拟、音频处理等，如Unity、Unreal Engine
	- 运行时环境
		- 游戏运行时需要的库或框架
- 用户界面文件
- 脚本和数据库
- 安装和卸载程序
- 文档和帮助助手
- 更新和补丁文件
- 存档和日志文件
- 其他文件

##### Web程序——一个购物网站

Web程序：

- 一种基于浏览器/客户端与服务器交互的应用程序。
- Web程序可以在任何支持web浏览器的设备上运行，无需独立安装。
- Web程序基于HTTP/HTTPS协议通信
- 通常采用前端+后端+数据库架构
- 一切动态网站都是web程序
- 典型的web程序：
	- 社交网站：Facebook、微博、知乎
	- 电子商务网站：淘宝、京东、亚马逊
	- 在线工具：Google，chatGPT
	- 企业管理系统：OA办公系统、ERP、CRM

现代Web程序一般分为前端（浏览器端）后端（服务器端）两个部分。

- 前端
  - HTML:定义网页结构和内容
  - CSS：控制网页的样式和布局
  - JavaScript脚本：实现动态交互（如点击按钮、加载数据等）
  - 前端资源、库：
  	- 作用：简化开发，提供组件化和状态管理、构建动弹用户界面
  	- 例子：React、Vue.js、Angular
  - 静态资源：图片、文字、图标等
  - 浏览器缓存：
  	- 缓存静态资源以提高加载速度
  	- 例如：localStrong:缓存用户偏好设置
  - API调用：通过HTTP请求于服务器端交互

- 服务器端

	- Web服务器
		- 作用：接收HTTP请求并返回响应
		- 例子：
			- Nginx(音：因金克斯)、Apache(音：阿帕奇):用于静态文件服务和反向代理
			- Node.js、Django、Flask:用于动态请求处理

	- 应用服务器：执行业务逻辑
	- 数据库：存储和管理数据
	- API接口：提供与前端交互的接口
	- 身份验证和授权：管理用户登录和权限控制
	- 缓存：提高数据访问速度，例如Redis缓存热门商品数据
	- 文件存储：存储用户上的文件
	- 消息队列：处理异步任务
	- 日志和监控：记录系统运行状态和错误信息
	- 部署和运维：管理赢得部署和运行

- 前后端交互

	- 通信方式：通过HTTP/HTTPS协议通信
	- 数据格式：通常使用JSON格式传输数据

- 浏览器端的缓存：

	- 当用户打开一个网页，浏览器会将HTML文件、CSS样式表、JS脚本以及图片、字体、视频等资源下载到本地计算机的缓存中。
	- 浏览器按以下顺序进行缓存
		1. HTML文件
			- 浏览器下载HTML文件并解析其中内容
			- HTML代码通常可以通过“查看网页源代码”查看
		2. CSS样式表（.css）
			- 通常作为独立的文件下载并储存在缓存中
			- 可以通过浏览器的“开发者工具”查看
		3. JS脚本（.js）
			- 通常也会被下载到本地缓存，并在本地执行
			- 有些JS脚本是动态加载的，可能不会全部存储在本地
			- 部分JS代码可能经过混淆或压缩，使直接查看变得困难
		4. 图片、字体、视频等资源
	- 以上内容缓存在本地计算机缓存目录，不同浏览器缓存路径不同
	- 浏览器的缓存系统会根据资源的类型和大小，采取不同的存储方式：
		- 内存缓存：
			- 一些短时间内频繁访问的资源（小型JS文件、HTML、CSS）会直接缓存在RAM——内存中
			- 当刷新页面时，浏览器会优先从内存缓存中读取数据而不是重新请求服务器
			- 关闭浏览器后，内存缓存会被清空

		- 磁盘缓存：
			- 绝大多数网页资源（HTML、CSS、JS、图片、字体、视频等）会存储到计算机的缓存设备（HDD/SSD）上
			- 浏览器关闭后这些资源仍然存在
			- 下一次访问时，浏览器会从磁盘缓存读取资源而不是重新下载


​	

​                                                          Web程序架构示意图

![web程序架构示意图](示意图/web程序架构示意图.png)



### web服务器简介

- Apache:主要用于静态资源服务,不支持Java servelet 和JSP
- Tomcat：一个Java Servelet容器+Web服务器，运行Java编写的应用程序，是Java EE规范的一部分

Apache与Tomcat既可以独立工作，也可以结合使用，Apache作为前端服务器，Tomcat作为后端服务器

Apache+Tomcat模式：

- Apache：
	- 处理静态资源包括图片、CSS、视频等
	- 实现负载均衡——将请求分发到多个Tomcat实例
- Tomcat:
	- 处理java动态内容，主要是Servelet、JSP
- 两者之间通过AJP或HTTP反向代理实现通信。

- 新的前端服务器——Nginx
- Nginx与Apache的对比：

| 特性         | Nginx                                  | Apache                               |
| ------------ | -------------------------------------- | ------------------------------------ |
| 架构         | 事件驱动、非异步阻塞                   | 多进程/多线程；基于线程处理请求      |
| 性能         | 高并发性能优异，适合静态资源和反向代理 | 并发性能较弱但处理动态能力较强       |
| 资源占用     | 内存和CPU占用较低                      | 内存和CPU占用较高                    |
| 配置方式     | 基于文件的配置，语法简洁               | 基于文件的配置，支持.htacess动态配置 |
| 模块化       | 核心功能内置，模块徐编译加载           | 高度模块化，支持动态加载模块         |
| 静态资源处理 | 性能优异、适合高并发静态资源服务       | 性能较好，但不如Nginx                |
| 动态内容处理 | 需通过FastCGI、uWSGI等协议与后端合作   | 内置PHP、Python等动态处理内容        |
| 使用场景     | 高并发静态资源服务，反向代理，负载均衡 | 动态内容处理                         |



- Nginx+Tomcat:
	- 通常Nginx作为前端服务器，Tomcat作为后端服务器
	- 协作内容包括：
		- 反向代理：Nginx接收客户端请求，之后将动态请求转发至Tomcat
		- 负载均衡：Nginx将请求分发到多个Tomcat实例，提高系统性能和可用性
		- 静态资源处理：Nginx直接处理静态资源，减轻Tomcat负担
		- SSL/TLS终止：Nginx处理HTTPS的加密和解密，Tomcat只需要处理HTTP请求
	- 协作的优势：
		- 高性能
		- 可扩展性
		- 安全性
		- 灵活性

Tomcat+Nginx是现代Web应用的常见模式

- Nginx+Tomcat与Apache+Tomcat比较：
	- 若Web应用主要是Java Web应用且需要高并发性能和低资源占用，Nginx+Tomcat是更好的选择
	- 若应用需要处理多种动态内容（如PHP、Python），或需要复杂的模块化支持，Apache+Tomcat是更好的选择

## 第一章 Java程序设计概述

### 1.1 java程序设计平台

java,不只是一种计算机语言，更是一个完整的开发平台，包括：

- 庞大的库
- 执行环境，特点在于：
	- 安全性
	- 跨操作系统的可移植性
	- 自动垃圾收集

### 1.2 Java白皮书关键术语

java白皮书——用于解释设计初衷和完成情况，总结了java语言的11种特性。

1. 简单性
	- java语法相比于c++语法更简洁，没有头文件、指针、结构、联合、操作符重载、虚基类
	- 另外一点是java体积足够小
2. 面向对象
	- java严格符合面向对象思想，但相比c++ Java中没有多重继承，而是用接口替代了这个功能
3. 分布式
	- java对HTTP协议、FTP协议等TCP/IP协议能良好处理
	- java程序能通过URL打开和访问网络上的对象
4. 健壮性
	- java编辑器足够强大，可以检查到很多语言在执行时才能发现的错误
5. 安全性
	- java从设计上避免一些攻击，包括：
		- 运行堆栈溢出
		- 破坏进程外的内催
		- 未经授权读取文件
6. 体系结构中立
	- java的基本数据类型的大小和有关运算都是明确的
		- 二进制数据：固定格式
		- 字符串：Unicode格式
	- 除用户界面有关部分，java其他库能良好的支持平台独立性
7. 解释性
	- java解释器可以在任何移植了解释器的机器执行java字节码。
	- java代码解释过程：

 		

![java代码编译与解释过程流程](示意图/java代码编译与解释过程流程.png)

8. 可移植性
	- 正是由于字节码文件与平台无关，只要安装了JVM的计算机都能正确的解释.class文件并获得可执行机器码，因此java具有良好的可移植性
9. 高性能
	- 现目前，利用即时编译技术，使java的执行速度可以媲美传统编译语言。
	- 即使编译：
		- 将执行最频繁字节码转换成机器码
		- 消除函数调用—称为内联
10. 多线程
	- 现目前，摩尔定律快要失效，不再追求更快的处理器而是更多的处理器并让它们保持忙碌
	- 多线程技术能够带来更好的交互响应和实时行为
	- Java能出色的实现并发程序设计
11. 动态性
	- java库能够自由地添加新方法和实例，不会对客户端造成影响

### 1.3 java applet

applet:

- 在网页中运行的java程序
- 需要一个启用java的浏览器来执行字节码
- 目前不再流行

### 1.4 Java发展简史

| 版本 | 年份 | 新语言特性                                           | 类与接口数量 |
| ---- | ---- | ---------------------------------------------------- | ------------ |
| 1.0  | 1996 | java诞生                                             | 211          |
| 5.0  | 2004 | 泛型类 foreach循环 可变参数 自动装箱 元数据          | 3279         |
| 7    | 2011 | 基于字符串的Switch语句 二进制字面量 异常处理增强     | 4024         |
| 8    | 2014 | Lambda表达式 包含默认方法的接口 流 日期/时间库       | 4240         |
| 17   |      | Switch表达式 文本块 instance of 模式匹配 记录 密封类 |              |



从2018年开始，java每6个月发布一个版本，每过一段时间选定一个长期支持版本。

目前最新的长期支持版本是java 17



### 1.5 关于java的常见误解

- 目前的java的即时编译技术使java运行速度与c++相差无几，有些时候能更快
- JavaScript与java没有关系

## 第二章 Java编程环境

### 2.1 安装java开发工具包

Oracle公司提供最新、最完整工具包

不同公司提供了许多OpenJDK构建版本

#### 2.1.1 下载jdk

通过国内国外渠道下载jdk

目前长期支持版本：java 17

​                                  java常见术语

| 术语                    | 解释                                     |
| ----------------------- | ---------------------------------------- |
| JDK                     | 编写java程序的软件                       |
| JRE(Java运行时环境)     | 用来运行java的软件                       |
| SE                      | 用于桌面应用或简单服务器应用的java平台   |
| ME                      | 用于小型设备的Java平台                   |
| EE(现更名为 Jakarta EE) | Java企业级开发平台，应用于大型分布式应用 |
| OpenJDK                 | Java SE的开源实现                        |
| LTS                     | 长期支持版本                             |



- Java SE 与 Java EE
	- Java EE:
		- java企业级开发平台，用于大型分布式应用
		- 如Web应用、企业级应用、微服务
		- Java EE提供了一系列API和规范，包括：
			- Web组件（Servlet、JSP、JSF）
			- 企业服务（EJB、JMS）
			- 数据持久化（JPA、JDBC）
			- 安全性（JAAS）
			- Web服务（JAX-RS、JAX-WS）
			- 依赖注入（CDI）
		- Java EE需要 Java EE服务器（Tomcat、Wildfly等）来运行
	- Java SE:
		- Java标准版，用于开发桌面应用、基础java库、工具类程序
		- 是java语言的基础，包括：
			- Java核心库（java.lang、java.util、java.io等）
			- 集合框架（List、Set、Map）
			- 多线程
			- I/O操作（文件处理、网络编程）
			- JVM和JDK
			- 基础GUI
	- Java SE不包含企业级的Web组件
	- 但Java EE基于 Java SE，开发Java EE应用程序必须安装java SE,因为Java EE运行时环境建立在java SE之上
	- Java EE在语法上和java SE没有区别，包括：
		- 基本语法（变量、数据类型、运算符）
		- 面向对象编程OOP（类、继承、封装、多态、接口）
		- 异常处理
		- 多线程
		- Lambda表达式、Stream API
		- 泛型、注解、反射

​                                            java SE 与 Java EE的区别

| 特性                       | java SE | Java EE                  |
| -------------------------- | ------- | ------------------------ |
| 基本Java语法               | 支持    | 支持                     |
| 集合框架（List、Map、Set） | 支持    | 支持                     |
| I/O操作（文件、网络）      | 支持    | 支持                     |
| 多线程                     | 支持    | 支持                     |
| GUI                        | 支持    | 一般不用于企业开发       |
| JDBC(数据库连接)           | 支持    | 支持，但Java EE更推荐JPA |
| JPA(持久化API)             | 不支持  | 支持                     |
| Servelet(Web开发)          | 不支持  | 支持                     |
| JSP(动态网页)              | 不支持  | 支持                     |
| EJB(企业级Java Bean)       | 不支持  | 支持                     |
| JMS(消息队列)              | 不支持  | 支持                     |
| JAX-RS/JAX-WS(Web服务)     | 不支持  | 支持                     |
| CDI(依赖注入)              | 不支持  | 支持                     |



java SE程序示例：

```java
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, Java SE!");
    }
}
```

Java EE程序示例：

~~~java
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/hello")
public class HelloServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<h1>Hello, Java EE!</h1>");
    }
}
~~~



上述 Java SE程序是普通的控制台应用

Java EE程序是Web应用，需要服务器运行。



JDK包含：

- java工具：
	- javac
	- java
	- jdb
	- ……
- JRE(JRE中包含JVM)



#### 2.1.2 设置jdk

安装时：

- windows系统：注意路径不要包含空格
- Linux系统：把.tar.gz解压缩

配置可执行文件：

- 将jdk的bin目录添加到*可执行路径*中

- 可执行路径：操作系统查找可执行文件时所遍历的目录

- windows配置可执行路径：

	1. 找到设置
	2. 搜索框查找 environment
	3. 选择Edit environment variables for your account(编辑用户的环境变量)
	4. 找到 Environment variables 对话框
	5. 找到 Users Variables(用户变量)列表
	6. 选择path变量，单击edit
	7. 增加一个变量，值为jdk的bin目录

- liunx系统：

	- 在\~/.bashrc或~/.bash-profile文件的最后一行添加：

		export PATH = jdk路径/bin:$PATH

### 2.2 使用命令行工具

利用命令行工具使用jdk是一种基本技能，可以方便检查jdk时候安装正确。

主要用到两个工具：

- javac:编译器，将源代码编译为字节码.class文件
- java：启动JVM，将字节码解释为可执行文件

==注意==：

- java区分大小写，而java规范要求公共类类名第一个字母必须大写，.java文件名必须与公共类名相同
- 编译器编译时需要添加后缀.java，而使用java运行时不需要后缀
- windows系统注意源代码不要添加隐藏后缀.txt

### 2.3 集成开发环境（边学边记）

使用IDEA

快捷操作：

- ctrl+D:将当行复制粘贴到下一行
- 选中字符后，shfit+F6:重构，修改整个项目中出现的选中的内容
- ctrl+alt+shfit+J:多重选择
- ctrl+/:将选中的内容集体注释

### 2.4 Jshell

在java 9中引进，一种使用java的程序。

工作模式：

读取（读取java表达式）→评估（评估输入）→打印（打印输出并再次开始读取）

- shell:
	- 一种特定的应用程序
	- 核心功能：
		- 解释和执行用户输入的命令，并管理进程、文件系统等操作系统资源
		- 支持脚本编写，能够自动执行任务

| 特性       | shell                        | 一般应用程序                   |
| ---------- | ---------------------------- | ------------------------------ |
| 主要功能   | 解释和执行命令，管理系统资源 | 提供特定功能如编辑文本、浏览等 |
| 交互方式   | 命令行界面CLI                | 图形界面GUI或CLI               |
| 运行环境   | 用户空间，直接与内核交互     | 用户空间，通过API与系统交互    |
| 自动化能力 | 强大的脚本支持               | 有限的脚本或宏支持             |

==注：并非只有Linux才有shell==

不同操作系统的典型shell：

- Linux和类Unix系统：
	- Bash(默认使用)、Zsh、Fish、ksh、Tcsh….
- windows：
	- 传统shell:
		- cmd.exe(命令提示符)：类似于早期的DOS的命令行工具，功能较为基础
		- Power Shell:功能强大，支持脚本和对象操作，适用于系统管理和自动化
	- 新shell:
		- windows Terminal:现代化终端，支持多标签和多种shell
		- WSL:允许在windows上运行Linux发行版及其shell（如Bash）

- 脚本Script:

	- 脚本与应用程序都是用于执行特定任务的软件。但在实现方式、运行环境、用途上有显著区别。

	| 特性     | 脚本                                  | 应用程序                         |
	| -------- | ------------------------------------- | -------------------------------- |
	| 运行方式 | 由解释器逐行解释执行                  | 编译为二进制文件直接运行         |
	| 文件形式 | 纯文本文件                            | 二进制文件                       |
	| 开发速度 | 开发快速，适合小型任务                | 开发周期长，适合复杂任务         |
	| 依赖     | 需要安装解释器                        | 通常独立运行，无需额外依赖       |
	| 用户界面 | 通常为CLI                             | 可以是CLI也可以是GUI             |
	| 典型用途 | 自动化任务，快速原型开发，系统管理    | 大型软件，图形化工具，高性能计算 |
	| 示例     | shell脚本，python脚本，JavaScript脚本 | 浏览器，文本编辑器，游戏         |





